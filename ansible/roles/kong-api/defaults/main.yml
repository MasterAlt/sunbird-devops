
---
kong_admin_api_url: "http://{{kong_host}}:8001"

# Default statsd_metrics
statsd_metrics: ["request_count", "status_count", "latency", "upstream_latency", "request_size", "response_size"]
statsd_host: statsd-service
statsd_port: 9125

statsd_pulgin:
  name: statsd
  config.metrics: "{{ statsd_metrics }}"
  config.host: "{{ statsd_host }}"
  config.port: "{{ statsd_port }}"

# Default Rate limits
small_rate_limit_per_hour: 100
medium_rate_limit_per_hour: 5000
x_medium_rate_limit_per_hour: 5000
large_rate_limit_per_hour: 10000
x2_large_rate_limit_per_hour: 15000
x_large_rate_limit_per_hour: 30000

premium_consumer_small_rate_limit_per_hour: 1000
premium_consumer_medium_rate_limit_per_hour: 10000
premium_consumer_large_rate_limit_per_hour: 100000

# Default max request size in MB
small_request_size_limit: 1
medium_request_size_limit: 10
large_request_size_limit: 100

# Default service prefixes
private_content_prefix: /private/content
content_prefix: /content
course_service_prefix: /course
itemset_prefix: /itemset
user_service_prefix: /user
data_service_prefix: /data
notes_service_prefix: /notes
org_service_prefix: /org
echo_service_prefix: /echo
composite_service_prefix: /composite
api_manager_perfix: /api-manager
meta_service_prefix: /meta
dashboard_service_prefix: /dashboard
announcement_service_prefix: /announcement
dialcode_service_prefix: /dialcode
channel_service_prefix: /channel
framework_service_prefix: /framework
badge_service_prefix: /badging
plugin_service_prefix: /plugins
config_service_prefix: /config
textbook_service_prefix: /textbook
lock_service_prefix: /lock
otp_service_prefix: /otp
sso_service_prefix: /sso
cert_service_prefix: /cert
cert_registry_service_prefix: /certreg
desktop_app_prefix: /desktop
license_api_prefix: /license

# Service URLs
knowledge_mw_service_url: "http://knowledge-mw-service:5000"
learning_service_url: "http://learner-service:9000"
vm_learning_service_url: "http://{{learningservice_ip}}:8080/learning-service"
telemetry_service_url: "http://telemetry-service:9001"
player_service_url: "http://player:3000"
echo_service_url: "http://echo:9595"
am_util_url: "http://adminutil:4000"
config_service_url: "http://config-service:8080"
lms_service_url: "http://lms-service:9000"
cert_service_url: "http://cert-service:9000"
cert_registry_service_url: "http://cert-registry-service:9000"
content_service_url: "http://content-service:9000"

premium_consumer_rate_limits:
  - api: createContent
    config.hour: "{{ premium_consumer_small_rate_limit_per_hour }}"
    config.limit_by: credential
    config.policy: local
  - api: updateContent
    config.hour: "{{ premium_consumer_medium_rate_limit_per_hour }}"
    config.limit_by: credential
    config.policy: local
  - api: readContent
    config.hour: "{{ premium_consumer_large_rate_limit_per_hour }}"
    config.limit_by: credential
    config.policy: local

kong_apis:
  - name: onboardConsumer
    request_path: "{{ api_manager_perfix }}/v1/consumer/create/jwt"
    upstream_url: "{{ am_util_url }}/v1/consumer/create/jwt"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['kongConsumer']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ small_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: KongConsumerApi
    request_path: "{{ api_manager_perfix }}/v1/consumer"
    upstream_url: "{{ am_util_url }}/v1/consumer"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['kongConsumer']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ small_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: uploadTOC
    request_path: "{{ textbook_service_prefix }}/v1/toc/upload"
    upstream_url: "{{ lms_service_url }}/v1/textbook/toc/upload"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['contentAdmin']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ medium_request_size_limit }}"

  - name: downloadTOC
    request_path: "{{ textbook_service_prefix }}/v1/toc/download"
    upstream_url: "{{ lms_service_url }}/v1/textbook/toc/download"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['contentAdmin']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ medium_request_size_limit }}"

  - name: acceptTermsAndCondition
    request_path: "{{ user_service_prefix }}/v1/tnc/accept"
    upstream_url: "{{ learning_service_url }}/v1/user/tnc/accept"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser',"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: generateOtp
    request_path: "{{ otp_service_prefix }}/v1/generate"
    upstream_url: "{{ learning_service_url }}/v1/otp/generate"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser',"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: verifyOtp
    request_path: "{{ otp_service_prefix }}/v1/verify"
    upstream_url: "{{ learning_service_url }}/v1/otp/verify"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser',"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: getUserByKey
    request_path: "{{ user_service_prefix  }}/v1/get"
    upstream_url: "{{ learning_service_url }}/v1/user/get"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['appUpdate',"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"


  - name: registerMobileAppTeacherAid
    request_path: "{{ api_manager_perfix }}/v1/consumer/mobile_app_teacheraid/credential/register"
    upstream_url: "{{ am_util_url }}/v1/consumer/mobile_app_teacheraid/credential/register"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['mobileAdminTeacherAid']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"


  - name: registerMobileDeviceTeacherAid
    request_path: "{{ api_manager_perfix }}/v1/consumer/mobile_device_teacheraid/credential/register"
    upstream_url: "{{ am_util_url }}/v1/consumer/mobile_device_teacheraid/credential/register"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['mobileAppTeacherAid']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: "contentBadgeLink"
    request_path: "{{ badge_service_prefix }}/v1/content/link"
    upstream_url: "{{ lms_service_url }}/v1/content/link"
    strip_request_path: true
    plugins:
     - {name: 'jwt'}
     - {name: 'cors'}
     - "{{ statsd_pulgin }}"
     - {name: 'acl',config.whitelist: "['publicUser']"}
     - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
     - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: "contentBadgeUnLink"
    request_path: "{{ badge_service_prefix }}/v1/content/unlink"
    upstream_url: "{{ lms_service_url }}/v1/content/unlink"
    strip_request_path: true
    plugins:
     - {name: 'jwt'}
     - {name: 'cors'}
     - "{{ statsd_pulgin }}"
     - {name: 'acl',config.whitelist: "['publicUser']"}
     - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
     - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: "privateUserUpdate"
    request_path: "{{ user_service_prefix }}/private/v1/update"
    upstream_url: "{{ learning_service_url }}/private/user/v1/update"
    strip_request_path: true
    plugins:
     - {name: 'jwt'}
     - {name: 'cors'}
     - "{{ statsd_pulgin }}"
     - {name: 'acl',config.whitelist: "['publicUser']"}
     - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
     - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: "getUserType"
    request_path: "{{ user_service_prefix }}/v1/type/list"
    upstream_url: "{{ learning_service_url }}/v1/user/type/list"
    strip_request_path: true
    plugins:
     - {name: 'jwt'}
     - {name: 'cors'}
     - "{{ statsd_pulgin }}"
     - {name: 'acl',config.whitelist: "['publicUser']"}
     - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
     - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: "masterLocationDelete"
    request_path: "{{data_service_prefix }}/v1/location/delete"
    upstream_url: "{{ learning_service_url }}/v1/location/delete"
    strip_request_path: true
    plugins:
     - {name: 'jwt'}
     - {name: 'cors'}
     - "{{ statsd_pulgin }}"
     - {name: 'acl',config.whitelist: "['locationAdmin']"}
     - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
     - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: "privateUserRead"
    request_path: "{{ user_service_prefix }}/private/v1/read"
    upstream_url: "{{ learning_service_url }}/private/user/v1/read"
    strip_request_path: true
    plugins:
     - {name: 'jwt'}
     - {name: 'cors'}
     - "{{ statsd_pulgin }}"
     - {name: 'acl',config.whitelist: "['publicUser']"}
     - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
     - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: privateUserAssignRole
    request_path: "{{ user_service_prefix }}/private/v1/assign/role"
    upstream_url: "{{ learning_service_url }}/private/user/v1/assign/role"
    strip_request_path: true
    plugins:
     - {name: 'jwt'}
     - {name: 'cors'}
     - "{{ statsd_pulgin }}"
     - {name: 'acl', config.whitelist: "['publicUser']" }
     - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
     - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: "telemetryErrorLogging"
    request_path: "/data/v1/client/logs"
    upstream_url: "{{ sunbird_analytics_api_base_url }}/data/v1/client/logs"
    strip_request_path: true
    plugins:
    - {name: 'cors'}
    - "{{ statsd_pulgin }}"
    - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour }}"}
    - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: generateCertificate
    request_path: "{{ cert_service_prefix }}/v1/certs/generate"
    upstream_url: "{{ cert_service_url }}/v1/certs/generate"
    strip_request_path: true
    plugins:
      - name: jwt
      - name: cors
      - "{{ statsd_pulgin }}"
      - name: acl
        config.whitelist: "['orgUpdate']"
      - name: rate-limiting
        config.policy: local
        config.hour: "{{ medium_rate_limit_per_hour }}"
        config.limit_by: credential
      - name: request-size-limiting
        config.allowed_payload_size: "{{ medium_request_size_limit }}"

  - name: createCertTemplate
    request_path: "{{ cert_service_prefix }}/v1/template/create"
    upstream_url: "{{ cert_service_url }}/cert/v1/template/create"
    strip_request_path: true
    plugins:
      - name: jwt
      - name: cors
      - "{{ statsd_pulgin }}"
      - name: acl
        config.whitelist: "['orgUpdate']"
      - name: rate-limiting
        config.policy: local
        config.hour: "{{ medium_rate_limit_per_hour }}"
        config.limit_by: credential
      - name: request-size-limiting
        config.allowed_payload_size: "{{ medium_request_size_limit }}"

  - name: updateCertTemplate
    request_path: "{{ cert_service_prefix }}/v1/template/update"
    upstream_url: "{{ cert_service_url }}/cert/v1/template/update"
    strip_request_path: true
    plugins:
      - name: jwt
      - name: cors
      - "{{ statsd_pulgin }}"
      - name: acl
        config.whitelist: "['orgUpdate']"
      - name: rate-limiting
        config.policy: local
        config.hour: "{{ medium_rate_limit_per_hour }}"
        config.limit_by: credential
      - name: request-size-limiting
        config.allowed_payload_size: "{{ medium_request_size_limit }}"

  - name: readCertTemplate
    request_path: "{{ cert_service_prefix }}/v1/template/read"
    upstream_url: "{{ cert_service_url }}/cert/v1/template/read"
    strip_request_path: true
    plugins:
      - name: jwt
      - name: cors
      - "{{ statsd_pulgin }}"
      - name: acl
        config.whitelist: "['orgUpdate']"
      - name: rate-limiting
        config.policy: local
        config.hour: "{{ medium_rate_limit_per_hour }}"
        config.limit_by: credential
      - name: request-size-limiting
        config.allowed_payload_size: "{{ medium_request_size_limit }}"

  - name: "orgAssignKeys"
    request_path: "{{ org_service_prefix }}/v1/assign/key"
    upstream_url: "{{ learning_service_url }}/v1/org/assign/key"
    strip_request_path: true
    plugins:
    - {name: 'jwt'}
    - {name: 'cors'}
    - "{{ statsd_pulgin }}"
    - {name: 'acl',config.whitelist: "['orgAdmin']"}
    - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
    - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: "mergeUserAccounts"
    request_path: "{{ user_service_prefix }}/v1/account/merge"
    upstream_url: "{{ learning_service_url }}/private/user/v1/account/merge"
    strip_request_path: true
    plugins:
    - {name: 'jwt'}
    - {name: 'cors'}
    - "{{ statsd_pulgin }}"
    - {name: 'acl',config.whitelist: "['publicUser',"}
    - {name: 'rate-limiting', config.policy: "local", config.hour: "{{ medium_rate_limit_per_hour  }}"}
    - {name: 'request-size-limiting', config.allowed_payload_size: "{{ small_request_size_limit }}" }

  - name: qrCodeDownload
    request_path: "{{ course_service_prefix }}/v1/qrcode/download"
    upstream_url: "{{ lms_service_url }}/v1/course/qrcode/download"
    strip_request_path: true
    plugins:
      - name: jwt
      - name: cors
      - "{{ statsd_pulgin }}"
      - name: acl
        config.whitelist: "['courseUser']"
      - name: rate-limiting
        config.policy: local
        config.hour: "{{ medium_rate_limit_per_hour }}"
        config.limit_by: credential
      - name: request-size-limiting
        config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: courseIssueCertificate
    request_path: "{{ course_service_prefix }}/batch/cert/v1/issue"
    upstream_url: "{{ lms_service_url }}/v1/course/batch/cert/issue"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['courseUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: courseBatchAddCertificateTemplate
    request_path: "{{ course_service_prefix }}/batch/cert/v1/template/add"
    upstream_url: "{{ lms_service_url }}/v1/course/batch/cert/template/add"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['courseUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: courseBatchRemoveCertificateTemplate
    request_path: "{{ course_service_prefix }}/batch/cert/v1/template/remove"
    upstream_url: "{{ lms_service_url }}/v1/course/batch/cert/template/remove"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['courseUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: downloadCertificate
    request_path: "{{ user_service_prefix }}/v1/certs/download"
    upstream_url: "{{ learning_service_url }}/v1/user/certs/download"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser',"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: UserBulkUploadv2
    request_path: "{{ user_service_prefix }}/v2/bulk/upload"
    upstream_url: "{{ learning_service_url }}/v2/bulk/user/upload"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['userAdmin']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ small_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ medium_request_size_limit }}"

  - name: downloadRegCertificate
    request_path: "{{ cert_registry_service_prefix }}/v1/certs/download"
    upstream_url: "{{ cert_registry_service_url }}/certs/v1/registry/download"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: validateRegCertificate
    request_path: "{{ cert_registry_service_prefix }}/v1/certs/validate"
    upstream_url: "{{ cert_registry_service_url }}/certs/v1/registry/validate"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: addRegCertificate
    request_path: "{{ cert_registry_service_prefix }}/v1/certs/add"
    upstream_url: "{{ cert_registry_service_url }}/certs/v1/registry/add"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: userMigrate
    request_path: "{{ user_service_prefix }}/v1/migrate"
    upstream_url: "{{ learning_service_url }}/v1/user/migrate"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser',"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: verifyRegCertificate
    request_path: "{{ cert_registry_service_prefix }}/v1/certs/verify"
    upstream_url: "{{ cert_registry_service_url }}/certs/v1/registry/verify"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: updateDesktopApp
    request_path: "{{ desktop_app_prefix }}/v1/update"
    upstream_url: "{{ player_service_url }}/v1/desktop/update"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['contentUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ large_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: uploadCrashLogs
    request_path: "{{ desktop_app_prefix }}/v1/upload-crash-logs"
    upstream_url: "{{ player_service_url }}/v1/desktop/upload-crash-logs"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['contentUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ small_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: userFeed
    request_path: "{{ user_service_prefix }}/v1/feed"
    upstream_url: "{{ learning_service_url }}/v1/user/feed"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser',"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: freshDesk
    request_path: "/tickets/v1/create"
    upstream_url: "{{ freshDesk_url }}/api/v2/tickets"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - name: request-transformer
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"
    - name: request-transformer
      config.replace.headers: "Authorization: Basic {{ freshDesk_token }}"

  - name: LicenseAPI
    request_path: "{{ license_api_prefix }}/v3"
    upstream_url: "{{ content_service_url }}/license/v3"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['domainUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: userExistenceApi
    request_path: "{{ user_service_prefix  }}/v1/exists"
    upstream_url: "{{ learning_service_url }}/v1/user/exists"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['appUpdate']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: createUserLearnerV3
    request_path: "{{ user_service_prefix }}/v1/signup"
    upstream_url: "{{ learning_service_url }}/v1/user/signup"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['userUpdate']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"

  - name: createUserVersion3
    request_path: "{{ user_service_prefix }}/v3/create"
    upstream_url: "{{ learning_service_url }}/v3/user/create"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['userUpdate']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"


  - name: searchRegCertificate
    request_path: "{{ cert_registry_service_prefix }}/v1/certs/search"
    upstream_url: "{{ cert_registry_service_url }}/certs/v1/registry/search"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"


  - name: readRegCertificate
    request_path: "{{ cert_registry_service_prefix }}/v1/certs/read"
    upstream_url: "{{ cert_registry_service_url }}/certs/v1/registry/read"
    strip_request_path: true
    plugins:
    - name: jwt
    - name: cors
    - "{{ statsd_pulgin }}"
    - name: acl
      config.whitelist: "['publicUser']"
    - name: rate-limiting
      config.policy: local
      config.hour: "{{ medium_rate_limit_per_hour }}"
      config.limit_by: credential
    - name: request-size-limiting
      config.allowed_payload_size: "{{ small_request_size_limit }}"
